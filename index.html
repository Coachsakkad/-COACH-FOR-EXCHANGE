<!DOCTYPE html>

<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نظام المحاسبة اليومية المتقدم</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: 'Arial', sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 10px;
        line-height: 1.6;
    }

    .container {
        max-width: 800px;
        margin: 0 auto;
        background: white;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        overflow: hidden;
    }

    .header {
        background: linear-gradient(45deg, #2c3e50, #3498db);
        color: white;
        padding: 20px;
        text-align: center;
    }

    .header h1 {
        font-size: 1.8em;
        margin-bottom: 5px;
    }

    .header p {
        font-size: 1em;
        opacity: 0.9;
    }

    .tabs {
        display: flex;
        background: #f8f9fa;
        border-bottom: 2px solid #dee2e6;
        overflow-x: auto;
    }

    .tab {
        flex: 1;
        padding: 15px 10px;
        text-align: center;
        cursor: pointer;
        border: none;
        background: transparent;
        font-size: 0.9em;
        font-weight: bold;
        color: #495057;
        white-space: nowrap;
        min-width: 120px;
    }

    .tab.active {
        background: #007bff;
        color: white;
    }

    .tab:hover {
        background: #e9ecef;
    }

    .tab.active:hover {
        background: #0056b3;
    }

    .tab-content {
        display: none;
        padding: 20px;
    }

    .tab-content.active {
        display: block;
    }

    .form-group {
        margin-bottom: 15px;
    }

    .form-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
        color: #495057;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
        width: 100%;
        padding: 10px;
        border: 1px solid #ced4da;
        border-radius: 5px;
        font-size: 14px;
    }

    .form-group textarea {
        resize: vertical;
        min-height: 80px;
    }

    .currency-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin: 20px 0;
    }

    .currency-card {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 10px;
        border: 2px solid #dee2e6;
        text-align: center;
    }

    .currency-card h3 {
        margin-bottom: 10px;
        color: #495057;
        font-size: 1em;
    }

    .currency-card input {
        text-align: center;
        font-size: 16px;
        font-weight: bold;
    }

    .btn {
        background: #007bff;
        color: white;
        padding: 12px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 14px;
        font-weight: bold;
        width: 100%;
        margin-top: 10px;
    }

    .btn:hover {
        background: #0056b3;
    }

    .btn-success {
        background: #28a745;
    }

    .btn-success:hover {
        background: #1e7e34;
    }

    .btn-danger {
        background: #dc3545;
    }

    .btn-danger:hover {
        background: #c82333;
    }

    .btn-warning {
        background: #ffc107;
        color: #212529;
    }

    .btn-warning:hover {
        background: #e0a800;
    }

    .operations-list {
        max-height: 400px;
        overflow-y: auto;
        border: 1px solid #dee2e6;
        border-radius: 5px;
    }

    .operation-item {
        padding: 15px;
        border-bottom: 1px solid #dee2e6;
        background: white;
    }

    .operation-item:last-child {
        border-bottom: none;
    }

    .operation-item:nth-child(even) {
        background: #f8f9fa;
    }

    .operation-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 5px;
    }

    .operation-type {
        font-weight: bold;
        color: #007bff;
    }

    .operation-amount {
        font-weight: bold;
        font-size: 1.1em;
    }

    .operation-details {
        font-size: 0.9em;
        color: #6c757d;
    }

    .balance-summary {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
        margin: 20px 0;
    }

    .balance-card {
        background: linear-gradient(45deg, #28a745, #20c997);
        color: white;
        padding: 15px;
        border-radius: 10px;
        text-align: center;
    }

    .balance-card h4 {
        margin-bottom: 10px;
        font-size: 0.9em;
    }

    .balance-amount {
        font-size: 1.2em;
        font-weight: bold;
    }

    .alert {
        padding: 15px;
        margin: 15px 0;
        border-radius: 5px;
    }

    .alert-success {
        background: #d4edda;
        border: 1px solid #c3e6cb;
        color: #155724;
    }

    .alert-danger {
        background: #f8d7da;
        border: 1px solid #f5c6cb;
        color: #721c24;
    }

    .flex-buttons {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
    }

    .flex-buttons .btn {
        flex: 1;
        min-width: 120px;
    }

    @media (max-width: 768px) {
        .container {
            margin: 5px;
            border-radius: 10px;
        }

        .header {
            padding: 15px;
        }

        .header h1 {
            font-size: 1.5em;
        }

        .tab {
            padding: 10px 5px;
            font-size: 0.8em;
            min-width: 80px;
        }

        .tab-content {
            padding: 15px;
        }

        .currency-grid {
            grid-template-columns: 1fr;
        }

        .balance-summary {
            grid-template-columns: repeat(2, 1fr);
        }
    }
</style>
```

</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🧮 نظام المحاسبة اليومية المتقدم</h1>
            <p>إدارة شاملة للمال والعمليات التجارية</p>
        </div>

```
    <div class="tabs">
        <button class="tab active" onclick="showTab('capital')">💰 رأس المال</button>
        <button class="tab" onclick="showTab('operations')">📊 العمليات</button>
        <button class="tab" onclick="showTab('add-operation')">➕ إضافة عملية</button>
        <button class="tab" onclick="showTab('summary')">📋 الملخص</button>
    </div>

    <!-- تبويب رأس المال -->
    <div id="capital" class="tab-content active">
        <h2>🏛️ إعداد رأس المال الابتدائي</h2>
        
        <div class="currency-grid">
            <div class="currency-card">
                <h3>💵 رأس المال بالدولار (USD)</h3>
                <input type="number" id="capital-usd" placeholder="0" min="0" step="0.01">
            </div>
            
            <div class="currency-card">
                <h3>🇸🇾 رأس المال بالليرة السورية (SYR)</h3>
                <input type="number" id="capital-syr" placeholder="0" min="0" step="1">
            </div>
            
            <div class="currency-card">
                <h3>🇯🇴 رأس المال بالدينار الأردني (JD)</h3>
                <input type="number" id="capital-jod" placeholder="0" min="0" step="0.001">
            </div>
            
            <div class="currency-card">
                <h3>🇹🇷 رأس المال بالليرة التركية (TRK)</h3>
                <input type="number" id="capital-try" placeholder="0" min="0" step="0.01">
            </div>
        </div>

        <div class="flex-buttons">
            <button class="btn btn-success" onclick="saveCapital()">💾 حفظ رأس المال</button>
            <button class="btn btn-warning" onclick="resetCapital()">🔄 إعادة تعيين</button>
        </div>
        
        <div id="capital-message"></div>
    </div>

    <!-- تبويب العمليات -->
    <div id="operations" class="tab-content">
        <h2>📋 سجل العمليات</h2>
        
        <div class="flex-buttons">
            <button class="btn" onclick="loadOperations()">🔄 تحديث القائمة</button>
            <button class="btn btn-danger" onclick="clearAllOperations()">🗑️ مسح الكل</button>
        </div>

        <div id="operations-list" class="operations-list">
            <div class="operation-item">
                <div style="text-align: center; color: #6c757d; padding: 20px;">
                    لا توجد عمليات مسجلة بعد
                </div>
            </div>
        </div>
    </div>

    <!-- تبويب إضافة عملية -->
    <div id="add-operation" class="tab-content">
        <h2>➕ إضافة عملية جديدة</h2>
        
        <form id="operation-form">
            <div class="form-group">
                <label for="operation-type">نوع العملية:</label>
                <select id="operation-type" required>
                    <option value="">اختر نوع العملية</option>
                    <option value="بيع">🛒 بيع</option>
                    <option value="شراء">🛍️ شراء</option>
                    <option value="مصروف">💸 مصروف</option>
                    <option value="استلام">💰 استلام مبلغ</option>
                    <option value="دفع">💳 دفع مبلغ</option>
                    <option value="صرافة">🏧 عملية صرافة</option>
                </select>
            </div>

            <div class="form-group">
                <label for="operation-currency">العملة:</label>
                <select id="operation-currency" required>
                    <option value="">اختر العملة</option>
                    <option value="USD">💵 دولار أمريكي (USD)</option>
                    <option value="SYR">🇸🇾 ليرة سورية (SYR)</option>
                    <option value="JOD">🇯🇴 دينار أردني (JOD)</option>
                    <option value="TRY">🇹🇷 ليرة تركية (TRY)</option>
                </select>
            </div>

            <div class="form-group">
                <label for="operation-amount">المبلغ:</label>
                <input type="number" id="operation-amount" placeholder="أدخل المبلغ" required min="0" step="0.01">
            </div>

            <div class="form-group">
                <label for="operation-description">الوصف:</label>
                <input type="text" id="operation-description" placeholder="وصف العملية" required>
            </div>

            <div class="form-group">
                <label for="operation-notes">ملاحظات إضافية:</label>
                <textarea id="operation-notes" placeholder="ملاحظات اختيارية..."></textarea>
            </div>

            <button type="submit" class="btn btn-success">✅ إضافة العملية</button>
        </form>

        <div id="operation-message"></div>
    </div>

    <!-- تبويب الملخص -->
    <div id="summary" class="tab-content">
        <h2>📊 ملخص الحسابات</h2>
        
        <div id="balance-summary" class="balance-summary">
            <!-- سيتم ملئها بواسطة JavaScript -->
        </div>

        <div class="flex-buttons">
            <button class="btn" onclick="updateSummary()">🔄 تحديث الملخص</button>
            <button class="btn btn-success" onclick="exportData()">📤 تصدير البيانات</button>
            <button class="btn btn-warning" onclick="importData()">📥 استيراد البيانات</button>
        </div>

        <div id="summary-message"></div>
    </div>
</div>

<script>
    // البيانات الأساسية
    let capitalData = {
        USD: 0,
        SYR: 0,
        JOD: 0,
        TRY: 0
    };

    let operations = [];

    // تحميل البيانات عند تحميل الصفحة
    window.addEventListener('load', function() {
        loadData();
        updateSummary();
        loadOperations();
    });

    // عرض التبويبات
    function showTab(tabName) {
        // إخفاء جميع التبويبات
        const tabContents = document.querySelectorAll('.tab-content');
        tabContents.forEach(content => content.classList.remove('active'));
        
        const tabs = document.querySelectorAll('.tab');
        tabs.forEach(tab => tab.classList.remove('active'));

        // عرض التبويب المحدد
        document.getElementById(tabName).classList.add('active');
        event.target.classList.add('active');

        // إضافة معالجات خاصة
        if (tabName === 'operations') {
            loadOperations();
        } else if (tabName === 'summary') {
            updateSummary();
        }
    }

    // حفظ رأس المال
    function saveCapital() {
        capitalData.USD = parseFloat(document.getElementById('capital-usd').value) || 0;
        capitalData.SYR = parseFloat(document.getElementById('capital-syr').value) || 0;
        capitalData.JOD = parseFloat(document.getElementById('capital-jod').value) || 0;
        capitalData.TRY = parseFloat(document.getElementById('capital-try').value) || 0;

        saveData();
        showMessage('capital-message', 'تم حفظ رأس المال بنجاح!', 'success');
        updateSummary();
    }

    // إعادة تعيين رأس المال
    function resetCapital() {
        if (confirm('هل أنت متأكد من إعادة تعيين رأس المال؟')) {
            capitalData = { USD: 0, SYR: 0, JOD: 0, TRY: 0 };
            document.getElementById('capital-usd').value = '';
            document.getElementById('capital-syr').value = '';
            document.getElementById('capital-jod').value = '';
            document.getElementById('capital-try').value = '';
            saveData();
            showMessage('capital-message', 'تم إعادة تعيين رأس المال', 'success');
            updateSummary();
        }
    }

    // إضافة عملية جديدة
    document.getElementById('operation-form').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const type = document.getElementById('operation-type').value;
        const currency = document.getElementById('operation-currency').value;
        const amount = parseFloat(document.getElementById('operation-amount').value);
        const description = document.getElementById('operation-description').value;
        const notes = document.getElementById('operation-notes').value;

        if (!type || !currency || !amount || !description) {
            showMessage('operation-message', 'يرجى ملء جميع الحقول المطلوبة', 'danger');
            return;
        }

        const operation = {
            id: Date.now(),
            type: type,
            currency: currency,
            amount: amount,
            description: description,
            notes: notes,
            date: new Date().toLocaleDateString('ar-SA'),
            time: new Date().toLocaleTimeString('ar-SA')
        };

        operations.unshift(operation);
        saveData();
        
        // إعادة تعيين النموذج
        document.getElementById('operation-form').reset();
        
        showMessage('operation-message', 'تم إضافة العملية بنجاح!', 'success');
        updateSummary();
    });

    // تحميل العمليات
    function loadOperations() {
        const operationsList = document.getElementById('operations-list');
        
        if (operations.length === 0) {
            operationsList.innerHTML = `
                <div class="operation-item">
                    <div style="text-align: center; color: #6c757d; padding: 20px;">
                        لا توجد عمليات مسجلة بعد
                    </div>
                </div>
            `;
            return;
        }

        let html = '';
        operations.forEach(operation => {
            const isIncome = ['بيع', 'استلام'].includes(operation.type);
            const isExpense = ['شراء', 'مصروف', 'دفع'].includes(operation.type);
            
            let amountColor = '#007bff';
            if (isIncome) amountColor = '#28a745';
            if (isExpense) amountColor = '#dc3545';

            html += `
                <div class="operation-item">
                    <div class="operation-header">
                        <span class="operation-type">${operation.type}</span>
                        <span class="operation-amount" style="color: ${amountColor}">
                            ${operation.amount.toLocaleString()} ${operation.currency}
                        </span>
                    </div>
                    <div class="operation-details">
                        <strong>${operation.description}</strong><br>
                        📅 ${operation.date} ⏰ ${operation.time}
                        ${operation.notes ? `<br>📝 ${operation.notes}` : ''}
                    </div>
                </div>
            `;
        });

        operationsList.innerHTML = html;
    }

    // مسح جميع العمليات
    function clearAllOperations() {
        if (confirm('هل أنت متأكد من مسح جميع العمليات؟ هذا الإجراء لا يمكن التراجع عنه.')) {
            operations = [];
            saveData();
            loadOperations();
            updateSummary();
            alert('تم مسح جميع العمليات');
        }
    }

    // تحديث الملخص
    function updateSummary() {
        const summary = calculateSummary();
        const balanceSummary = document.getElementById('balance-summary');

        let html = '';
        Object.keys(capitalData).forEach(currency => {
            const currencyNames = {
                USD: '💵 دولار أمريكي',
                SYR: '🇸🇾 ليرة سورية', 
                JOD: '🇯🇴 دينار أردني',
                TRY: '🇹🇷 ليرة تركية'
            };

            html += `
                <div class="balance-card">
                    <h4>${currencyNames[currency]}</h4>
                    <div class="balance-amount">${summary[currency].toLocaleString()} ${currency}</div>
                </div>
            `;
        });

        balanceSummary.innerHTML = html;
    }

    // حساب الملخص
    function calculateSummary() {
        const summary = { ...capitalData };

        operations.forEach(operation => {
            const { type, currency, amount } = operation;
            
            if (['بيع', 'استلام'].includes(type)) {
                summary[currency] += amount;
            } else if (['شراء', 'مصروف', 'دفع'].includes(type)) {
                summary[currency] -= amount;
            }
        });

        return summary;
    }

    // تصدير البيانات
    function exportData() {
        const data = {
            capital: capitalData,
            operations: operations,
            exportDate: new Date().toISOString()
        };

        const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        
        const a = document.createElement('a');
        a.href = url;
        a.download = `accounting-backup-${new Date().toISOString().split('T')[0]}.json`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);

        showMessage('summary-message', 'تم تصدير البيانات بنجاح!', 'success');
    }

    // استيراد البيانات
    function importData() {
        const input = document.createElement('input');
        input.type = 'file';
        input.accept = '.json';
        
        input.onchange = function(e) {
            const file = e.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    if (data.capital && data.operations) {
                        capitalData = data.capital;
                        operations = data.operations;
                        
                        // تحديث حقول رأس المال
                        document.getElementById('capital-usd').value = capitalData.USD || '';
                        document.getElementById('capital-syr').value = capitalData.SYR || '';
                        document.getElementById('capital-jod').value = capitalData.JOD || '';
                        document.getElementById('capital-try').value = capitalData.TRY || '';
                        
                        saveData();
                        updateSummary();
                        loadOperations();
                        
                        showMessage('summary-message', 'تم استيراد البيانات بنجاح!', 'success');
                    } else {
                        throw new Error('تنسيق ملف غير صحيح');
                    }
                } catch (error) {
                    showMessage('summary-message', 'خطأ في استيراد البيانات: ' + error.message, 'danger');
                }
            };
            reader.readAsText(file);
        };
        
        input.click();
    }

    // حفظ البيانات في التخزين المحلي
    function saveData() {
        const data = {
            capital: capitalData,
            operations: operations
        };
        const storageData = JSON.stringify(data);
        try {
            // استخدام متغير في الذاكرة بدلاً من localStorage
            window.accountingData = storageData;
        } catch (error) {
            console.error('خطأ في حفظ البيانات:', error);
        }
    }

    // تحميل البيانات من التخزين المحلي
    function loadData() {
        try {
            const data = window.accountingData ? JSON.parse(window.accountingData) : null;
            if (data) {
                capitalData = data.capital || { USD: 0, SYR: 0, JOD: 0, TRY: 0 };
                operations = data.operations || [];
                
                // تحديث حقول رأس المال
                document.getElementById('capital-usd').value = capitalData.USD || '';
                document.getElementById('capital-syr').value = capitalData.SYR || '';
                document.getElementById('capital-jod').value = capitalData.JOD || '';
                document.getElementById('capital-try').value = capitalData.TRY || '';
            }
        } catch (error) {
            console.error('خطأ في تحميل البيانات:', error);
            capitalData = { USD: 0, SYR: 0, JOD: 0, TRY: 0 };
            operations = [];
        }
    }

    // عرض الرسائل
    function showMessage(elementId, message, type) {
        const element = document.getElementById(elementId);
        element.innerHTML = `
            <div class="alert alert-${type}">
                ${message}
            </div>
        `;
        
        setTimeout(() => {
            element.innerHTML = '';
        }, 3000);
    }
</script>
```

</body>
</html>