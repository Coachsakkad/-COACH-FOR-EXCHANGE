<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„ÙƒÙˆØªØ´ Ù„Ù„ØµØ±Ø§ÙØ©</title>
    <meta name="description" content="Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„ÙƒÙˆØªØ´ Ù„Ù„ØµØ±Ø§ÙØ© - Ù†Ø¸Ø§Ù… Ù…Ø­Ø§Ø³Ø¨Ø© ÙˆØµØ±Ø§ÙØ© Ù…ØªÙ‚Ø¯Ù… Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© ÙˆØ£Ø³Ø¹Ø§Ø± Ø§Ù„ØµØ±Ù">
    <meta name="keywords" content="Ø§Ù„ÙƒÙˆØªØ´ Ù„Ù„ØµØ±Ø§ÙØ©, Ù…Ø­Ø§Ø³Ø¨Ø©, ØµØ±Ø§ÙØ©, Ø¹Ù…Ù„Ø§Øª, Ø¥Ø¯Ø§Ø±Ø© Ù…Ø§Ù„ÙŠØ©, Ø£Ø³Ø¹Ø§Ø± ØµØ±Ù">
    <meta name="author" content="Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„ÙƒÙˆØªØ´ Ù„Ù„ØµØ±Ø§ÙØ©">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„ÙƒÙˆØªØ´ Ù„Ù„ØµØ±Ø§ÙØ©">
    <meta property="og:description" content="Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„ÙƒÙˆØªØ´ Ù„Ù„ØµØ±Ø§ÙØ© - Ø¥Ø¯Ø§Ø±Ø© Ø´Ø§Ù…Ù„Ø© Ù„Ù„Ù…Ø§Ù„ ÙˆØ§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ© Ù…Ø¹ Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ØµØ±Ù">
    <meta property="og:type" content="website">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2c3e50">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Ø§Ù„ÙƒÙˆØªØ´ Ù„Ù„ØµØ±Ø§ÙØ©">
    
    <!-- Ù…ÙƒØªØ¨Ø© SheetJS Ù„ØªØµØ¯ÙŠØ± Excel -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¦</text></svg>">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(45deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 1.8em;
            margin-bottom: 5px;
        }

        .header p {
            font-size: 1em;
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #dee2e6;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px 10px;
            text-align: center;
            cursor: pointer;
            border: none;
            background: transparent;
            font-size: 0.9em;
            font-weight: bold;
            color: #495057;
            white-space: nowrap;
            min-width: 120px;
            transition: all 0.3s ease;
        }

        .tab.active {
            background: #007bff;
            color: white;
        }

        .tab:hover {
            background: #e9ecef;
        }

        .tab.active:hover {
            background: #0056b3;
        }

        .tab-content {
            display: none;
            padding: 20px;
            min-height: 400px;
        }

        .tab-content.active {
            display: block;
        }

        .tab-content h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #495057;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0,123,255,0.1);
        }

        .form-group small {
            display: block;
            margin-top: 5px;
            color: #6c757d;
            font-size: 0.9em;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: #007bff;
            color: white;
        }

        .btn-primary:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #1e7e34;
            transform: translateY(-2px);
        }

        .btn-warning {
            background: #ffc107;
            color: #212529;
        }

        .btn-warning:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-danger:hover {
            background: #c82333;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #545b62;
            transform: translateY(-2px);
        }

        .currency-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .currency-card {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 15px;
            transition: all 0.3s ease;
        }

        .currency-card:hover {
            border-color: #007bff;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .balance-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .balance-card {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .balance-card h3 {
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .balance-card .amount {
            font-size: 1.5em;
            font-weight: bold;
        }

        .operations-list {
            max-height: 500px;
            overflow-y: auto;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 10px;
        }

        .operation-item {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .operation-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .operation-type {
            font-weight: bold;
            font-size: 1.1em;
        }

        .operation-amount {
            color: #007bff;
            font-weight: bold;
        }

        .operation-details {
            color: #6c757d;
            font-size: 0.9em;
        }

        .flex-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }

        .flex-buttons .btn {
            flex: 1;
            min-width: 150px;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-weight: bold;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-danger {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .alert-warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }

        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .info-box {
            background: #e9ecef;
            border-left: 4px solid #007bff;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }

        .info-box h3 {
            margin-bottom: 10px;
            color: #495057;
        }

        .info-box ul {
            margin-right: 20px;
        }

        .info-box li {
            margin-bottom: 5px;
            color: #6c757d;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .stat-card h4 {
            color: #495057;
            margin-bottom: 10px;
        }

        .stat-card .value {
            font-size: 1.8em;
            font-weight: bold;
            color: #007bff;
        }

        .footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 20px;
            margin-top: 20px;
        }

        .footer p {
            margin: 5px 0;
            opacity: 0.8;
        }

        /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª */
        .notification-item {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .notification-item.success {
            border-left: 4px solid #28a745;
        }

        .notification-item.error {
            border-left: 4px solid #dc3545;
        }

        .notification-item.warning {
            border-left: 4px solid #ffc107;
        }

        .notification-item.info {
            border-left: 4px solid #17a2b8;
        }

        .notification-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .notification-icon {
            font-size: 1.2em;
        }

        .notification-time {
            font-size: 0.8em;
            color: #6c757d;
        }

        .notification-message {
            color: #495057;
            line-height: 1.4;
        }

        .notifications-list {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 10px;
            background: #f8f9fa;
        }

        /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø¢Ù„Ø© Ø§Ù„Ø­Ø§Ø³Ø¨Ø© */
        .calculator-container {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .result-box {
            background: #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            border-left: 4px solid #007bff;
        }

        .calculation-step {
            margin-bottom: 10px;
            padding: 8px;
            background: white;
            border-radius: 5px;
        }

        .calculation-result {
            padding: 10px;
            background: #d4edda;
            border-radius: 5px;
            font-size: 1.1em;
            color: #155724;
        }

        /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ØµØ±Ù */
        .currency-row {
            padding: 10px;
            margin: 5px 0;
            background: white;
            border-radius: 5px;
            border-left: 3px solid #007bff;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }

            .header {
                padding: 15px;
            }

            .header h1 {
                font-size: 1.5em;
            }

            .tab {
                padding: 10px 5px;
                font-size: 0.8em;
                min-width: 80px;
            }

            .tab-content {
                padding: 15px;
            }

            .currency-grid {
                grid-template-columns: 1fr;
            }

            .balance-summary {
                grid-template-columns: repeat(2, 1fr);
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .operation-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .operation-amount {
                margin-top: 5px;
            }

            .flex-buttons {
                flex-direction: column;
            }

            .flex-buttons .btn {
                width: 100%;
                margin-bottom: 10px;
            }
        }

        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„ØªÙØ§Ø¹Ù„ */
        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .shake {
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #6c757d;
        }

        .loading::after {
            content: '...';
            animation: dots 1.5s steps(5, end) infinite;
        }

        @keyframes dots {
            0%, 20% { color: rgba(0,0,0,0); text-shadow: .25em 0 0 rgba(0,0,0,0), .5em 0 0 rgba(0,0,0,0); }
            40% { color: #6c757d; text-shadow: .25em 0 0 rgba(0,0,0,0), .5em 0 0 rgba(0,0,0,0); }
            60% { text-shadow: .25em 0 0 #6c757d, .5em 0 0 rgba(0,0,0,0); }
            80%, 100% { text-shadow: .25em 0 0 #6c757d, .5em 0 0 #6c757d; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¦ Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„ÙƒÙˆØªØ´ Ù„Ù„ØµØ±Ø§ÙØ©</h1>
            <p>Ø¥Ø¯Ø§Ø±Ø© Ø´Ø§Ù…Ù„Ø© Ù„Ù„Ù…Ø§Ù„ ÙˆØ§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ© Ù…Ø¹ Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ØµØ±Ù</p>
            <p style="font-size: 0.9em; margin-top: 5px;">ğŸ“ Ù„Ù„ØªÙˆØ§ØµÙ„: +963-0992223739</p>
            <p style="font-size: 0.9em; margin-top: 5px;">ğŸ“ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: Ø¯Ù…Ø´Ù‚ - Ø³Ø§Ø­Ø© Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</p>
            <p style="font-size: 0.9em; margin-top: 5px;">ğŸšš Ø®Ø¯Ù…Ø© ØªÙˆØµÙŠÙ„ Ø¶Ù…Ù† Ø¯Ù…Ø´Ù‚ Ù…Ø£Ø¬ÙˆØ±Ø©</p>
            <p style="font-size: 0.9em; margin-top: 5px;">ğŸ’¬ ÙˆØ§ØªØ³Ø§Ø¨: +963-0992223739</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('capital')">ğŸ’° Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„</button>
            <button class="tab" onclick="showTab('operations')">ğŸ“Š Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</button>
            <button class="tab" onclick="showTab('add-operation')">â• Ø¥Ø¶Ø§ÙØ© Ø¹Ù…Ù„ÙŠØ©</button>
            <button class="tab" onclick="showTab('summary')">ğŸ“‹ Ø§Ù„Ù…Ù„Ø®Øµ</button>
            <button class="tab" onclick="showTab('exchange-rates')">ğŸ’± Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ØµØ±Ù</button>
            <button class="tab" onclick="showTab('calculator')">ğŸ§® Ø¢Ù„Ø© Ø­Ø§Ø³Ø¨Ø©</button>
            <button class="tab" onclick="showTab('notifications')">ğŸ”” Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</button>
            <button class="tab" onclick="showTab('whatsapp-settings')">ğŸ“± Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨</button>
        </div>

        <!-- ØªØ¨ÙˆÙŠØ¨ Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„ -->
        <div id="capital" class="tab-content active">
            <h2>ğŸ›ï¸ Ø¥Ø¹Ø¯Ø§Ø¯ Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</h2>
            
            <div class="currency-grid">
                <div class="currency-card">
                    <label for="capital-syr">ğŸ‡¸ğŸ‡¾ Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ© (SYR)</label>
                    <input type="number" id="capital-syr" placeholder="0" step="0.01">
                </div>
                
                <div class="currency-card">
                    <label for="capital-usd">ğŸ’µ Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± Ø§Ù„Ø£Ù…Ø±ÙŠÙƒÙŠ (USD)</label>
                    <input type="number" id="capital-usd" placeholder="0" step="0.01">
                </div>
                
                <div class="currency-card">
                    <label for="capital-jod">ğŸ‡¯ğŸ‡´ Ø§Ù„Ø¯ÙŠÙ†Ø§Ø± Ø§Ù„Ø£Ø±Ø¯Ù†ÙŠ (JOD)</label>
                    <input type="number" id="capital-jod" placeholder="0" step="0.01">
                </div>
                
                <div class="currency-card">
                    <label for="capital-try">ğŸ‡¹ğŸ‡· Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„ØªØ±ÙƒÙŠØ© (TRY)</label>
                    <input type="number" id="capital-try" placeholder="0" step="0.01">
                </div>
                
                <div class="currency-card">
                    <label for="capital-kwd">ğŸ‡°ğŸ‡¼ Ø§Ù„Ø¯ÙŠÙ†Ø§Ø± Ø§Ù„ÙƒÙˆÙŠØªÙŠ (KWD)</label>
                    <input type="number" id="capital-kwd" placeholder="0" step="0.01">
                </div>
                
                <div class="currency-card">
                    <label for="capital-eur">ğŸ‡ªğŸ‡º Ø§Ù„ÙŠÙˆØ±Ùˆ (EUR)</label>
                    <input type="number" id="capital-eur" placeholder="0" step="0.01">
                </div>
                
                <div class="currency-card">
                    <label for="capital-sar">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø±ÙŠØ§Ù„ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ (SAR)</label>
                    <input type="number" id="capital-sar" placeholder="0" step="0.01">
                </div>
                
                <div class="currency-card">
                    <label for="capital-aed">ğŸ‡¦ğŸ‡ª Ø§Ù„Ø¯Ø±Ù‡Ù… Ø§Ù„Ø¥Ù…Ø§Ø±Ø§ØªÙŠ (AED)</label>
                    <input type="number" id="capital-aed" placeholder="0" step="0.01">
                </div>
            </div>

            <div class="flex-buttons">
                <button class="btn btn-success" onclick="saveCapital()">ğŸ’¾ Ø­ÙØ¸ Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„</button>
                <button class="btn btn-warning" onclick="resetCapital()">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>
            </div>
            
            <div id="capital-message"></div>
        </div>

        <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª -->
        <div id="operations" class="tab-content">
            <h2>ğŸ“‹ Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</h2>
            
            <div class="flex-buttons">
                <button class="btn" onclick="loadOperations()">ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
                <button class="btn btn-danger" onclick="clearAllOperations()">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>
                <button class="btn btn-success" onclick="exportToExcel()">ğŸ“Š ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ Excel</button>
            </div>

            <div id="operations-list" class="operations-list">
                <div class="loading">
                    Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª...
                </div>
            </div>
        </div>

        <!-- ØªØ¨ÙˆÙŠØ¨ Ø¥Ø¶Ø§ÙØ© Ø¹Ù…Ù„ÙŠØ© -->
        <div id="add-operation" class="tab-content">
            <h2>â• Ø¥Ø¶Ø§ÙØ© Ø¹Ù…Ù„ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©</h2>
            
            <form id="operation-form">
                <div class="form-group">
                    <label for="operation-type">Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©:</label>
                    <select id="operation-type" required onchange="updateExchangeRateSection()">
                        <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</option>
                        <option value="Ø´Ø±Ø§Ø¡">ğŸ›ï¸ Ø´Ø±Ø§Ø¡ Ø¹Ù…Ù„Ø©</option>
                        <option value="Ø¨ÙŠØ¹">ğŸ›’ Ø¨ÙŠØ¹ Ø¹Ù…Ù„Ø©</option>
                        <option value="Ù…ØµØ±ÙˆÙ">ğŸ’¸ Ù…ØµØ±ÙˆÙ</option>
                        <option value="Ù‚Ø¨Ø¶">ğŸ’° Ù‚Ø¨Ø¶ Ù…Ø¨Ù„Øº</option>
                        <option value="Ø¯ÙØ¹">ğŸ’³ Ø¯ÙØ¹ Ù…Ø¨Ù„Øº</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="operation-currency">Ø§Ù„Ø¹Ù…Ù„Ø©:</label>
                    <select id="operation-currency" required>
                        <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…Ù„Ø©</option>
                        <option value="USD">ğŸ’µ Ø¯ÙˆÙ„Ø§Ø± Ø£Ù…Ø±ÙŠÙƒÙŠ (USD)</option>
                        <option value="JOD">ğŸ‡¯ğŸ‡´ Ø¯ÙŠÙ†Ø§Ø± Ø£Ø±Ø¯Ù†ÙŠ (JOD)</option>
                        <option value="TRY">ğŸ‡¹ğŸ‡· Ù„ÙŠØ±Ø© ØªØ±ÙƒÙŠØ© (TRY)</option>
                        <option value="KWD">ğŸ‡°ğŸ‡¼ Ø¯ÙŠÙ†Ø§Ø± ÙƒÙˆÙŠØªÙŠ (KWD)</option>
                        <option value="EUR">ğŸ‡ªğŸ‡º ÙŠÙˆØ±Ùˆ (EUR)</option>
                        <option value="SAR">ğŸ‡¸ğŸ‡¦ Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ (SAR)</option>
                        <option value="AED">ğŸ‡¦ğŸ‡ª Ø¯Ø±Ù‡Ù… Ø¥Ù…Ø§Ø±Ø§ØªÙŠ (AED)</option>
                        <option value="SYR">ğŸ‡¸ğŸ‡¾ Ù„ÙŠØ±Ø© Ø³ÙˆØ±ÙŠØ© (SYR)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="operation-amount">Ø§Ù„ÙƒÙ…ÙŠØ©:</label>
                    <input type="number" id="operation-amount" placeholder="0" step="0.01" required>
                </div>

                <div id="exchange-rate-section" class="form-group" style="display: none;">
                    <label for="exchange-rate">Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù (Ø¨Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ©):</label>
                    <input type="number" id="exchange-rate" placeholder="0" step="0.01">
                    <small>Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„ÙˆØ§Ø­Ø¯Ø© Ù…Ù† Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ø¨Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ©</small>
                </div>

                <div class="form-group">
                    <label for="operation-description">Ø§Ù„ÙˆØµÙ:</label>
                    <input type="text" id="operation-description" placeholder="ÙˆØµÙ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©" required>
                </div>

                <div class="form-group">
                    <label for="operation-notes">Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):</label>
                    <textarea id="operation-notes" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©" rows="3"></textarea>
                </div>

                <div class="form-group">
                    <label for="operation-date">Ø§Ù„ØªØ§Ø±ÙŠØ®:</label>
                    <input type="date" id="operation-date" required>
                </div>

                <div class="flex-buttons">
                    <button type="submit" class="btn btn-success">âœ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</button>
                    <button type="reset" class="btn btn-secondary">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>
                </div>
            </form>

            <div id="operation-message"></div>
        </div>

        <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…Ù„Ø®Øµ -->
        <div id="summary" class="tab-content">
            <h2>ğŸ“Š Ù…Ù„Ø®Øµ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</h2>
            
            <div class="balance-summary">
                <div class="balance-card">
                    <h3>ğŸ‡¸ğŸ‡¾ Ø±ØµÙŠØ¯ Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ©</h3>
                    <div class="amount" id="balance-syr">0</div>
                </div>
                
                <div class="balance-card">
                    <h3>ğŸ’µ Ø±ØµÙŠØ¯ Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± Ø§Ù„Ø£Ù…Ø±ÙŠÙƒÙŠ</h3>
                    <div class="amount" id="balance-usd">0</div>
                </div>
                
                <div class="balance-card">
                    <h3>ğŸ‡¯ğŸ‡´ Ø±ØµÙŠØ¯ Ø§Ù„Ø¯ÙŠÙ†Ø§Ø± Ø§Ù„Ø£Ø±Ø¯Ù†ÙŠ</h3>
                    <div class="amount" id="balance-jod">0</div>
                </div>
                
                <div class="balance-card">
                    <h3>ğŸ‡¹ğŸ‡· Ø±ØµÙŠØ¯ Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„ØªØ±ÙƒÙŠØ©</h3>
                    <div class="amount" id="balance-try">0</div>
                </div>
                
                <div class="balance-card">
                    <h3>ğŸ‡°ğŸ‡¼ Ø±ØµÙŠØ¯ Ø§Ù„Ø¯ÙŠÙ†Ø§Ø± Ø§Ù„ÙƒÙˆÙŠØªÙŠ</h3>
                    <div class="amount" id="balance-kwd">0</div>
                </div>
                
                <div class="balance-card">
                    <h3>ğŸ‡ªğŸ‡º Ø±ØµÙŠØ¯ Ø§Ù„ÙŠÙˆØ±Ùˆ</h3>
                    <div class="amount" id="balance-eur">0</div>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <h4>ğŸ“ˆ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</h4>
                    <div class="value" id="total-operations">0</div>
                </div>
                
                <div class="stat-card">
                    <h4>ğŸ›ï¸ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø´Ø±Ø§Ø¡</h4>
                    <div class="value" id="buy-operations">0</div>
                </div>
                
                <div class="stat-card">
                    <h4>ğŸ›’ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¨ÙŠØ¹</h4>
                    <div class="value" id="sell-operations">0</div>
                </div>
                
                <div class="stat-card">
                    <h4>ğŸ’¸ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h4>
                    <div class="value" id="expense-operations">0</div>
                </div>
            </div>

            <div id="summary-message"></div>
        </div>

        <!-- ØªØ¨ÙˆÙŠØ¨ Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ØµØ±Ù -->
        <div id="exchange-rates" class="tab-content">
            <h2>ğŸ’± Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ØµØ±Ù Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h2>
            
            <div class="form-group">
                <label for="usd-rate">ğŸ’µ Ø³Ø¹Ø± Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± Ø§Ù„Ø£Ù…Ø±ÙŠÙƒÙŠ (USD)</label>
                <input type="number" id="usd-rate" placeholder="15000" step="0.01">
                <small>Ø³Ø¹Ø± Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± Ø¨Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ©</small>
            </div>

            <div class="form-group">
                <label for="jod-rate">ğŸ‡¯ğŸ‡´ Ø³Ø¹Ø± Ø§Ù„Ø¯ÙŠÙ†Ø§Ø± Ø§Ù„Ø£Ø±Ø¯Ù†ÙŠ (JOD)</label>
                <input type="number" id="jod-rate" placeholder="21000" step="0.01">
                <small>Ø³Ø¹Ø± Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¯ÙŠÙ†Ø§Ø± Ø§Ù„Ø£Ø±Ø¯Ù†ÙŠ Ø¨Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ©</small>
            </div>

            <div class="form-group">
                <label for="try-rate">ğŸ‡¹ğŸ‡· Ø³Ø¹Ø± Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„ØªØ±ÙƒÙŠØ© (TRY)</label>
                <input type="number" id="try-rate" placeholder="500" step="0.01">
                <small>Ø³Ø¹Ø± Ø´Ø±Ø§Ø¡ Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„ØªØ±ÙƒÙŠØ© Ø¨Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ©</small>
            </div>

            <div class="form-group">
                <label for="kwd-rate">ğŸ‡°ğŸ‡¼ Ø³Ø¹Ø± Ø§Ù„Ø¯ÙŠÙ†Ø§Ø± Ø§Ù„ÙƒÙˆÙŠØªÙŠ (KWD)</label>
                <input type="number" id="kwd-rate" placeholder="48000" step="0.01">
                <small>Ø³Ø¹Ø± Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¯ÙŠÙ†Ø§Ø± Ø§Ù„ÙƒÙˆÙŠØªÙŠ Ø¨Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ©</small>
            </div>

            <div class="form-group">
                <label for="eur-rate">ğŸ‡ªğŸ‡º Ø³Ø¹Ø± Ø§Ù„ÙŠÙˆØ±Ùˆ (EUR)</label>
                <input type="number" id="eur-rate" placeholder="16000" step="0.01">
                <small>Ø³Ø¹Ø± Ø´Ø±Ø§Ø¡ Ø§Ù„ÙŠÙˆØ±Ùˆ Ø¨Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ©</small>
            </div>

            <div class="form-group">
                <label for="sar-rate">ğŸ‡¸ğŸ‡¦ Ø³Ø¹Ø± Ø§Ù„Ø±ÙŠØ§Ù„ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ (SAR)</label>
                <input type="number" id="sar-rate" placeholder="4000" step="0.01">
                <small>Ø³Ø¹Ø± Ø´Ø±Ø§Ø¡ Ø§Ù„Ø±ÙŠØ§Ù„ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ Ø¨Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ©</small>
            </div>

            <div class="form-group">
                <label for="aed-rate">ğŸ‡¦ğŸ‡ª Ø³Ø¹Ø± Ø§Ù„Ø¯Ø±Ù‡Ù… Ø§Ù„Ø¥Ù…Ø§Ø±Ø§ØªÙŠ (AED)</label>
                <input type="number" id="aed-rate" placeholder="4100" step="0.01">
                <small>Ø³Ø¹Ø± Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¯Ø±Ù‡Ù… Ø§Ù„Ø¥Ù…Ø§Ø±Ø§ØªÙŠ Ø¨Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ©</small>
            </div>

            <div class="form-group">
                <button type="button" class="btn btn-success" onclick="saveExchangeRates()">ğŸ’¾ Ø­ÙØ¸ Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ØµØ±Ù</button>
                <button type="button" class="btn btn-secondary" onclick="resetExchangeRates()">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>
            </div>

            <div class="info-box">
                <h3>ğŸ“Š Ù…Ø¹Ø§Ø¯Ù„ Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø¨Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ©:</h3>
                <div id="currency-equivalents">
                    <div class="currency-row">
                        <span>ğŸ’µ 1 Ø¯ÙˆÙ„Ø§Ø± Ø£Ù…Ø±ÙŠÙƒÙŠ = <span id="usd-equivalent">0</span> Ù„ÙŠØ±Ø© Ø³ÙˆØ±ÙŠØ©</span>
                    </div>
                    <div class="currency-row">
                        <span>ğŸ‡¯ğŸ‡´ 1 Ø¯ÙŠÙ†Ø§Ø± Ø£Ø±Ø¯Ù†ÙŠ = <span id="jod-equivalent">0</span> Ù„ÙŠØ±Ø© Ø³ÙˆØ±ÙŠØ©</span>
                    </div>
                    <div class="currency-row">
                        <span>ğŸ‡¹ğŸ‡· 1 Ù„ÙŠØ±Ø© ØªØ±ÙƒÙŠØ© = <span id="try-equivalent">0</span> Ù„ÙŠØ±Ø© Ø³ÙˆØ±ÙŠØ©</span>
                    </div>
                    <div class="currency-row">
                        <span>ğŸ‡°ğŸ‡¼ 1 Ø¯ÙŠÙ†Ø§Ø± ÙƒÙˆÙŠØªÙŠ = <span id="kwd-equivalent">0</span> Ù„ÙŠØ±Ø© Ø³ÙˆØ±ÙŠØ©</span>
                    </div>
                    <div class="currency-row">
                        <span>ğŸ‡ªğŸ‡º 1 ÙŠÙˆØ±Ùˆ = <span id="eur-equivalent">0</span> Ù„ÙŠØ±Ø© Ø³ÙˆØ±ÙŠØ©</span>
                    </div>
                    <div class="currency-row">
                        <span>ğŸ‡¸ğŸ‡¦ 1 Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ = <span id="sar-equivalent">0</span> Ù„ÙŠØ±Ø© Ø³ÙˆØ±ÙŠØ©</span>
                    </div>
                    <div class="currency-row">
                        <span>ğŸ‡¦ğŸ‡ª 1 Ø¯Ø±Ù‡Ù… Ø¥Ù…Ø§Ø±Ø§ØªÙŠ = <span id="aed-equivalent">0</span> Ù„ÙŠØ±Ø© Ø³ÙˆØ±ÙŠØ©</span>
                    </div>
                </div>
            </div>

            <div id="exchange-rates-message"></div>
        </div>

        <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø¢Ù„Ø© Ø§Ù„Ø­Ø§Ø³Ø¨Ø© -->
        <div id="calculator" class="tab-content">
            <h2>ğŸ§® Ø¢Ù„Ø© Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Øª</h2>
            
            <div class="calculator-container">
                <div class="form-group">
                    <label for="calc-amount">ğŸ’° Ø§Ù„Ù…Ø¨Ù„Øº</label>
                    <input type="number" id="calc-amount" placeholder="100" step="0.01">
                </div>

                <div class="form-group">
                    <label for="calc-from-currency">Ù…Ù† Ø§Ù„Ø¹Ù…Ù„Ø©</label>
                    <select id="calc-from-currency">
                        <option value="SYR">ğŸ‡¸ğŸ‡¾ Ù„ÙŠØ±Ø© Ø³ÙˆØ±ÙŠØ© (SYR)</option>
                        <option value="USD">ğŸ’µ Ø¯ÙˆÙ„Ø§Ø± Ø£Ù…Ø±ÙŠÙƒÙŠ (USD)</option>
                        <option value="JOD">ğŸ‡¯ğŸ‡´ Ø¯ÙŠÙ†Ø§Ø± Ø£Ø±Ø¯Ù†ÙŠ (JOD)</option>
                        <option value="TRY">ğŸ‡¹ğŸ‡· Ù„ÙŠØ±Ø© ØªØ±ÙƒÙŠØ© (TRY)</option>
                        <option value="KWD">ğŸ‡°ğŸ‡¼ Ø¯ÙŠÙ†Ø§Ø± ÙƒÙˆÙŠØªÙŠ (KWD)</option>
                        <option value="EUR">ğŸ‡ªğŸ‡º ÙŠÙˆØ±Ùˆ (EUR)</option>
                        <option value="SAR">ğŸ‡¸ğŸ‡¦ Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ (SAR)</option>
                        <option value="AED">ğŸ‡¦ğŸ‡ª Ø¯Ø±Ù‡Ù… Ø¥Ù…Ø§Ø±Ø§ØªÙŠ (AED)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="calc-to-currency">Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ù…Ù„Ø©</label>
                    <select id="calc-to-currency">
                        <option value="SYR">ğŸ‡¸ğŸ‡¾ Ù„ÙŠØ±Ø© Ø³ÙˆØ±ÙŠØ© (SYR)</option>
                        <option value="USD">ğŸ’µ Ø¯ÙˆÙ„Ø§Ø± Ø£Ù…Ø±ÙŠÙƒÙŠ (USD)</option>
                        <option value="JOD">ğŸ‡¯ğŸ‡´ Ø¯ÙŠÙ†Ø§Ø± Ø£Ø±Ø¯Ù†ÙŠ (JOD)</option>
                        <option value="TRY">ğŸ‡¹ğŸ‡· Ù„ÙŠØ±Ø© ØªØ±ÙƒÙŠØ© (TRY)</option>
                        <option value="KWD">ğŸ‡°ğŸ‡¼ Ø¯ÙŠÙ†Ø§Ø± ÙƒÙˆÙŠØªÙŠ (KWD)</option>
                        <option value="EUR">ğŸ‡ªğŸ‡º ÙŠÙˆØ±Ùˆ (EUR)</option>
                        <option value="SAR">ğŸ‡¸ğŸ‡¦ Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ (SAR)</option>
                        <option value="AED">ğŸ‡¦ğŸ‡ª Ø¯Ø±Ù‡Ù… Ø¥Ù…Ø§Ø±Ø§ØªÙŠ (AED)</option>
                    </select>
                </div>

                <div class="form-group">
                    <button type="button" class="btn btn-primary" onclick="calculateCurrency()">ğŸ”„ ØªØ­ÙˆÙŠÙ„</button>
                    <button type="button" class="btn btn-secondary" onclick="clearCalculator()">ğŸ—‘ï¸ Ù…Ø³Ø­</button>
                </div>

                <div id="calculation-result" class="result-box" style="display: none;">
                    <h3>ğŸ“Š Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„:</h3>
                    <div id="conversion-details"></div>
                </div>
            </div>

            <div id="calculator-message"></div>
        </div>

        <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª -->
        <div id="notifications" class="tab-content">
            <h2>ğŸ”” Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</h2>
            
            <div class="form-group">
                <label>
                    <input type="checkbox" id="notifications-enabled" checked>
                    ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©
                </label>
                <small>Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø¹Ù†Ø¯ Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</small>
            </div>

            <div class="form-group">
                <label>
                    <input type="checkbox" id="auto-send-whatsapp" checked>
                    Ø¥Ø±Ø³Ø§Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„ÙˆØ§ØªØ³Ø§Ø¨
                </label>
                <small>ÙØªØ­ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù…Ø¹ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¹Ù†Ø¯ Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</small>
            </div>

            <div class="form-group">
                <button type="button" class="btn btn-success" onclick="saveNotificationSettings()">ğŸ’¾ Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</button>
                <button type="button" class="btn btn-secondary" onclick="clearAllNotifications()">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</button>
            </div>

            <div class="notifications-list">
                <h3>ğŸ“‹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø­Ø¯ÙŠØ«Ø©:</h3>
                <div id="notifications-container">
                    <div class="notification-item">
                        <div style="text-align: center; color: #6c757d; padding: 20px;">
                            Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø¨Ø¹Ø¯
                        </div>
                    </div>
                </div>
            </div>

            <div id="notifications-message"></div>
        </div>

        <!-- ØªØ¨ÙˆÙŠØ¨ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ -->
        <div id="whatsapp-settings" class="tab-content">
            <h2>ğŸ“± Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨</h2>
            
            <div class="form-group">
                <label>
                    <input type="checkbox" id="whatsapp-enabled" checked>
                    ØªÙØ¹ÙŠÙ„ ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨
                </label>
                <small>Ø¹Ù†Ø¯ Ø§Ù„ØªÙØ¹ÙŠÙ„ØŒ Ø³ÙŠØªÙ… ÙØªØ­ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù…Ø¹ Ø±Ø³Ø§Ù„Ø© Ø¬Ø§Ù‡Ø²Ø© Ø¹Ù†Ø¯ Ø¥Ø¶Ø§ÙØ© Ø£ÙŠ Ø¹Ù…Ù„ÙŠØ©</small>
            </div>

            <div class="form-group">
                <label for="whatsapp-phone">ğŸ“ Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ (Ø¨Ø¯ÙˆÙ† Ø¹Ù„Ø§Ù…Ø© +)</label>
                <input type="text" id="whatsapp-phone" value="9630992223739" placeholder="9630992223739">
                <small>Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ø¨Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø¯ÙˆÙ„ÙŠ Ø¨Ø¯ÙˆÙ† Ø¹Ù„Ø§Ù…Ø© + (Ù…Ø«Ø§Ù„: 9630992223739)</small>
            </div>

            <div class="form-group">
                <label for="whatsapp-name">ğŸª Ø§Ø³Ù… Ø§Ù„Ù…Ø­Ù„/Ø§Ù„Ø´Ø±ÙƒØ©</label>
                <input type="text" id="whatsapp-name" value="Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„ÙƒÙˆØªØ´ Ù„Ù„ØµØ±Ø§ÙØ©" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø­Ù„" readonly>
                <small>Ø§Ø³Ù… Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø«Ø§Ø¨Øª ÙˆØºÙŠØ± Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØºÙŠÙŠØ±</small>
            </div>

            <div class="form-group">
                <button type="button" class="btn btn-success" onclick="saveWhatsAppSettings()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
                <button type="button" class="btn btn-secondary" onclick="testWhatsAppNotification()">ğŸ“± Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡</button>
            </div>

            <div class="info-box">
                <h3>ğŸ“‹ ÙƒÙŠÙÙŠØ© Ø¹Ù…Ù„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª:</h3>
                <ul>
                    <li>Ø¹Ù†Ø¯ Ø¥Ø¶Ø§ÙØ© Ø£ÙŠ Ø¹Ù…Ù„ÙŠØ© (Ø´Ø±Ø§Ø¡ØŒ Ø¨ÙŠØ¹ØŒ Ù…ØµØ±ÙˆÙ)ØŒ Ø³ÙŠØªÙ… ÙØªØ­ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</li>
                    <li>Ø³ØªØ¬Ø¯ Ø±Ø³Ø§Ù„Ø© Ø¬Ø§Ù‡Ø²Ø© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</li>
                    <li>ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù…Ø¨Ø§Ø´Ø±Ø© Ø£Ùˆ ØªØ¹Ø¯ÙŠÙ„Ù‡Ø§ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø©</li>
                    <li>ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø·ÙŠÙ„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª Ù…Ù† Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø©</li>
                </ul>
            </div>

            <div id="whatsapp-message"></div>
        </div>

        <div class="footer">
            <p>ğŸ¦ Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„ÙƒÙˆØªØ´ Ù„Ù„ØµØ±Ø§ÙØ©</p>
            <p>Ù†Ø¸Ø§Ù… Ø´Ø§Ù…Ù„ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© ÙˆØ£Ø³Ø¹Ø§Ø± Ø§Ù„ØµØ±Ù</p>
            <p>ğŸ“ Ù„Ù„ØªÙˆØ§ØµÙ„ ÙˆØ§Ù„Ø§Ø³ØªÙØ³Ø§Ø±: +963-0992223739</p>
            <p>ğŸ“ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: Ø¯Ù…Ø´Ù‚ - Ø³Ø§Ø­Ø© Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</p>
            <p>ğŸšš Ø®Ø¯Ù…Ø© ØªÙˆØµÙŠÙ„ Ø¶Ù…Ù† Ø¯Ù…Ø´Ù‚ Ù…Ø£Ø¬ÙˆØ±Ø©</p>
            <p>ğŸ’¬ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨: +963-0992223739</p>
        </div>
    </div>

    <script>
        // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
        let capitalData = {
            SYR: 0,
            USD: 0,
            JOD: 0,
            TRY: 0,
            KWD: 0,
            EUR: 0
        };

        let operations = [];

        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨
        let whatsappSettings = {
            enabled: true,
            phoneNumber: '9630992223739',
            ownerName: 'Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„ÙƒÙˆØªØ´ Ù„Ù„ØµØ±Ø§ÙØ©'
        };

        // Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ØµØ±Ù
        let exchangeRates = {
            USD: 15000,
            JOD: 21000,
            TRY: 500,
            KWD: 48000,
            EUR: 16000
        };

        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
        let notificationSettings = {
            enabled: true,
            autoSendWhatsapp: true
        };

        // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
        let notifications = [];

        // Ø­ÙØ¸ Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„
        function saveCapital() {
            try {
                capitalData.SYR = parseFloat(document.getElementById('capital-syr').value) || 0;
                capitalData.USD = parseFloat(document.getElementById('capital-usd').value) || 0;
                capitalData.JOD = parseFloat(document.getElementById('capital-jod').value) || 0;
                capitalData.TRY = parseFloat(document.getElementById('capital-try').value) || 0;
                capitalData.KWD = parseFloat(document.getElementById('capital-kwd').value) || 0;
                capitalData.EUR = parseFloat(document.getElementById('capital-eur').value) || 0;

                saveData();
                updateSummary();
                showMessage('capital-message', 'ØªÙ… Ø­ÙØ¸ Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                
                if (notificationSettings.enabled) {
                    addNotification('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„ Ø¨Ù†Ø¬Ø§Ø­', 'success');
                }
            } catch (error) {
                handleError(error, 'Ø­ÙØ¸ Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„');
            }
        }

        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„
        function resetCapital() {
            try {
                if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ±ØŸ')) {
                    capitalData = {
                        SYR: 0,
                        USD: 0,
                        JOD: 0,
                        TRY: 0,
                        KWD: 0,
                        EUR: 0
                    };

                    document.getElementById('capital-syr').value = 0;
                    document.getElementById('capital-usd').value = 0;
                    document.getElementById('capital-jod').value = 0;
                    document.getElementById('capital-try').value = 0;
                    document.getElementById('capital-kwd').value = 0;
                    document.getElementById('capital-eur').value = 0;

                    saveData();
                    updateSummary();
                    showMessage('capital-message', 'ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„!', 'info');
                    
                    if (notificationSettings.enabled) {
                        addNotification('ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„', 'info');
                    }
                }
            } catch (error) {
                handleError(error, 'Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„');
            }
        }

        // Ø¥Ø¶Ø§ÙØ© Ø¹Ù…Ù„ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©
        document.getElementById('operation-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            try {
                const type = document.getElementById('operation-type').value;
                const currency = document.getElementById('operation-currency').value;
                const amount = parseFloat(document.getElementById('operation-amount').value);
                const description = document.getElementById('operation-description').value.trim();
                const notes = document.getElementById('operation-notes').value.trim();
                const date = document.getElementById('operation-date').value;

                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                const amountValidation = validateAmount(amount);
                const descValidation = validateDescription(description);

                if (!type) {
                    throw new Error('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©');
                }

                if (!currency) {
                    throw new Error('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…Ù„Ø©');
                }

                if (!date) {
                    throw new Error('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØªØ§Ø±ÙŠØ®');
                }

                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù Ù„Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ØªÙŠ ØªØªØ·Ù„Ø¨ Ø°Ù„Ùƒ
                let exchangeRateValue = 1;
                if ((type === 'Ø´Ø±Ø§Ø¡' || type === 'Ø¨ÙŠØ¹') && currency !== 'SYR') {
                    const exchangeRateInput = document.getElementById('exchange-rate');
                    exchangeRateValue = parseFloat(exchangeRateInput.value);
                    
                    if (!exchangeRateValue || exchangeRateValue <= 0) {
                        throw new Error('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø³Ø¹Ø± ØµØ±Ù ØµØ­ÙŠØ­');
                    }
                }

                // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø¨Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ©
                let syrAmount = 0;
                if (type === 'Ø´Ø±Ø§Ø¡' || type === 'Ø¨ÙŠØ¹') {
                    if (currency === 'SYR') {
                        syrAmount = amountValidation.value;
                    } else {
                        syrAmount = amountValidation.value * exchangeRateValue;
                    }
                } else {
                    syrAmount = amountValidation.value;
                }

                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªÙˆÙØ± Ø§Ù„Ù…Ø¨Ù„Øº Ù„Ù„Ø´Ø±Ø§Ø¡
                if (type === 'Ø´Ø±Ø§Ø¡' && currency !== 'SYR') {
                    const currentBalance = getCurrentBalance();
                    if (currentBalance.SYR < syrAmount) {
                        throw new Error(`Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØªØ§Ø­ Ø¨Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ© ØºÙŠØ± ÙƒØ§ÙÙŠ. Ø§Ù„Ù…Ø·Ù„ÙˆØ¨: ${syrAmount.toLocaleString()}ØŒ Ø§Ù„Ù…ØªØ§Ø­: ${currentBalance.SYR.toLocaleString()}`);
                    }
                }

                const operation = {
                    id: Date.now(),
                    type: type,
                    currency: currency,
                    amount: amountValidation.value,
                    rate: exchangeRateValue,
                    syrAmount: syrAmount,
                    description: descValidation.value,
                    notes: notes || '',
                    date: date,
                    time: new Date().toLocaleTimeString('ar-SA')
                };

                operations.unshift(operation);
                saveData();
                
                // Ø¥Ø¶Ø§ÙØ© Ø¥Ø´Ø¹Ø§Ø± Ø¯Ø§Ø®Ù„ÙŠ
                if (notificationSettings.enabled) {
                    const notificationMessage = `ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø¹Ù…Ù„ÙŠØ© ${type}: ${amountValidation.value} ${currency} - ${descValidation.value}`;
                    addNotification(notificationMessage, 'success');
                }
                
                // Ø¥Ø±Ø³Ø§Ù„ ØªÙ†Ø¨ÙŠÙ‡ ÙˆØ§ØªØ³Ø§Ø¨
                if (notificationSettings.autoSendWhatsapp) {
                    try {
                        const whatsappMessage = formatOperationMessage(operation);
                        sendWhatsAppNotification(whatsappMessage);
                    } catch (whatsappError) {
                        console.warn('ØªØ¹Ø°Ø± Ø¥Ø±Ø³Ø§Ù„ ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨:', whatsappError);
                        if (notificationSettings.enabled) {
                            addNotification('ØªØ¹Ø°Ø± Ø¥Ø±Ø³Ø§Ù„ ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨', 'warning');
                        }
                    }
                }
                
                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
                document.getElementById('operation-form').reset();
                document.getElementById('exchange-rate-section').style.display = 'none';
                
                // ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø§Ù„ÙŠ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰
                const today = new Date().toISOString().split('T')[0];
                document.getElementById('operation-date').value = today;
                
                showMessage('operation-message', 'ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                updateSummary();
                
                // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø¨ØµØ±ÙŠ
                document.querySelector('#operation-form .btn-success').classList.add('pulse');
                setTimeout(() => {
                    document.querySelector('#operation-form .btn-success').classList.remove('pulse');
                }, 2000);
            } catch (error) {
                handleError(error, 'operation');
                document.querySelector('#operation-form .btn-success').classList.add('shake');
                setTimeout(() => {
                    document.querySelector('#operation-form .btn-success').classList.remove('shake');
                }, 500);
            }
        });

        // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ
        function getCurrentBalance() {
            try {
                const balance = { ...capitalData };

                operations.forEach(operation => {
                    const { type, currency, amount, syrAmount } = operation;
                    
                    if (type === 'Ø´Ø±Ø§Ø¡') {
                        if (currency === 'SYR') {
                            balance.SYR -= amount;
                        } else {
                            balance.SYR -= syrAmount;
                            balance[currency] += amount;
                        }
                    } else if (type === 'Ø¨ÙŠØ¹') {
                        if (currency === 'SYR') {
                            balance.SYR += amount;
                        } else {
                            balance.SYR += syrAmount;
                            balance[currency] -= amount;
                        }
                    } else if (type === 'Ù…ØµØ±ÙˆÙ' || type === 'Ø¯ÙØ¹') {
                        balance[currency] -= amount;
                    } else if (type === 'Ù‚Ø¨Ø¶') {
                        balance[currency] += amount;
                    }
                });

                return balance;
            } catch (error) {
                handleError(error, 'Ø­Ø³Ø§Ø¨ Ø§Ù„Ø±ØµÙŠØ¯');
                return { ...capitalData };
            }
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª
        function loadOperations() {
            try {
                const operationsList = document.getElementById('operations-list');
                
                if (operations.length === 0) {
                    operationsList.innerHTML = `
                        <div class="operation-item">
                            <div style="text-align: center; color: #6c757d; padding: 20px;">
                                Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ù…Ø³Ø¬Ù„Ø© Ø¨Ø¹Ø¯
                            </div>
                        </div>
                    `;
                    return;
                }

                let html = '';
                operations.forEach(operation => {
                    const typeEmoji = {
                        'Ø´Ø±Ø§Ø¡': 'ğŸ›ï¸',
                        'Ø¨ÙŠØ¹': 'ğŸ›’',
                        'Ù…ØµØ±ÙˆÙ': 'ğŸ’¸',
                        'Ù‚Ø¨Ø¶': 'ğŸ’°',
                        'Ø¯ÙØ¹': 'ğŸ’³'
                    };

                    const currencyEmoji = {
                        'USD': 'ğŸ’µ',
                        'JOD': 'ğŸ‡¯ğŸ‡´',
                        'TRY': 'ğŸ‡¹ğŸ‡·',
                        'KWD': 'ğŸ‡°ğŸ‡¼',
                        'EUR': 'ğŸ‡ªğŸ‡º',
                        'SYR': 'ğŸ‡¸ğŸ‡¾'
                    };

                    html += `
                        <div class="operation-item">
                            <div class="operation-header">
                                <div class="operation-type">
                                    ${typeEmoji[operation.type] || 'ğŸ“'} ${operation.type}
                                </div>
                                <div class="operation-amount">
                                    ${operation.amount.toLocaleString()} ${currencyEmoji[operation.currency]} ${operation.currency}
                                </div>
                            </div>
                            <div class="operation-details">
                                <div><strong>Ø§Ù„ÙˆØµÙ:</strong> ${operation.description}</div>
                                ${operation.notes ? `<div><strong>Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</strong> ${operation.notes}</div>` : ''}
                                ${operation.rate && operation.rate !== 1 ? `<div><strong>Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù:</strong> ${operation.rate.toLocaleString()}</div>` : ''}
                                ${operation.syrAmount && operation.currency !== 'SYR' ? `<div><strong>Ø§Ù„Ù…Ø¨Ù„Øº Ø¨Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ©:</strong> ${operation.syrAmount.toLocaleString()}</div>` : ''}
                                <div><strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> ${operation.date} - ${operation.time}</div>
                            </div>
                        </div>
                    `;
                });

                operationsList.innerHTML = html;
            } catch (error) {
                handleError(error, 'ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª');
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù„Ø®Øµ
        function updateSummary() {
            try {
                const balance = getCurrentBalance();
                
                document.getElementById('balance-syr').textContent = balance.SYR.toLocaleString();
                document.getElementById('balance-usd').textContent = balance.USD.toLocaleString();
                document.getElementById('balance-jod').textContent = balance.JOD.toLocaleString();
                document.getElementById('balance-try').textContent = balance.TRY.toLocaleString();
                document.getElementById('balance-kwd').textContent = balance.KWD.toLocaleString();
                document.getElementById('balance-eur').textContent = balance.EUR.toLocaleString();

                // Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª
                const totalOps = operations.length;
                const buyOps = operations.filter(op => op.type === 'Ø´Ø±Ø§Ø¡').length;
                const sellOps = operations.filter(op => op.type === 'Ø¨ÙŠØ¹').length;
                const expenseOps = operations.filter(op => op.type === 'Ù…ØµØ±ÙˆÙ' || op.type === 'Ø¯ÙØ¹').length;

                document.getElementById('total-operations').textContent = totalOps;
                document.getElementById('buy-operations').textContent = buyOps;
                document.getElementById('sell-operations').textContent = sellOps;
                document.getElementById('expense-operations').textContent = expenseOps;
            } catch (error) {
                handleError(error, 'ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù„Ø®Øµ');
            }
        }

        // ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ Excel
        function exportToExcel() {
            try {
                if (operations.length === 0) {
                    alert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ù„Ù„ØªØµØ¯ÙŠØ±');
                    return;
                }

                const workbook = XLSX.utils.book_new();
                
                // Ø¥Ø¹Ø¯Ø§Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª
                const operationsData = operations.map(operation => ({
                    'Ø§Ù„Ù†ÙˆØ¹': operation.type,
                    'Ø§Ù„Ø¹Ù…Ù„Ø©': operation.currency,
                    'Ø§Ù„ÙƒÙ…ÙŠØ©': operation.amount,
                    'Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù': operation.rate || '',
                    'Ø§Ù„Ù…Ø¨Ù„Øº Ø¨Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ©': operation.syrAmount || '',
                    'Ø§Ù„ÙˆØµÙ': operation.description,
                    'Ù…Ù„Ø§Ø­Ø¸Ø§Øª': operation.notes || '',
                    'Ø§Ù„ØªØ§Ø±ÙŠØ®': operation.date,
                    'Ø§Ù„ÙˆÙ‚Øª': operation.time
                }));

                const operationsSheet = XLSX.utils.json_to_sheet(operationsData);
                XLSX.utils.book_append_sheet(workbook, operationsSheet, 'Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª');

                // Ø¥Ø¹Ø¯Ø§Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù„Ø®Øµ
                const balance = getCurrentBalance();
                const summaryData = [
                    { 'Ø§Ù„Ø¹Ù…Ù„Ø©': 'Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ©', 'Ø§Ù„Ø±Ù…Ø²': 'SYR', 'Ø§Ù„Ø±ØµÙŠØ¯': balance.SYR },
                    { 'Ø§Ù„Ø¹Ù…Ù„Ø©': 'Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± Ø§Ù„Ø£Ù…Ø±ÙŠÙƒÙŠ', 'Ø§Ù„Ø±Ù…Ø²': 'USD', 'Ø§Ù„Ø±ØµÙŠØ¯': balance.USD },
                    { 'Ø§Ù„Ø¹Ù…Ù„Ø©': 'Ø§Ù„Ø¯ÙŠÙ†Ø§Ø± Ø§Ù„Ø£Ø±Ø¯Ù†ÙŠ', 'Ø§Ù„Ø±Ù…Ø²': 'JOD', 'Ø§Ù„Ø±ØµÙŠØ¯': balance.JOD },
                    { 'Ø§Ù„Ø¹Ù…Ù„Ø©': 'Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„ØªØ±ÙƒÙŠØ©', 'Ø§Ù„Ø±Ù…Ø²': 'TRY', 'Ø§Ù„Ø±ØµÙŠØ¯': balance.TRY },
                    { 'Ø§Ù„Ø¹Ù…Ù„Ø©': 'Ø§Ù„Ø¯ÙŠÙ†Ø§Ø± Ø§Ù„ÙƒÙˆÙŠØªÙŠ', 'Ø§Ù„Ø±Ù…Ø²': 'KWD', 'Ø§Ù„Ø±ØµÙŠØ¯': balance.KWD },
                    { 'Ø§Ù„Ø¹Ù…Ù„Ø©': 'Ø§Ù„ÙŠÙˆØ±Ùˆ', 'Ø§Ù„Ø±Ù…Ø²': 'EUR', 'Ø§Ù„Ø±ØµÙŠØ¯': balance.EUR }
                ];

                const summarySheet = XLSX.utils.json_to_sheet(summaryData);
                XLSX.utils.book_append_sheet(workbook, summarySheet, 'Ø§Ù„Ù…Ù„Ø®Øµ');

                // ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù„Ù
                const fileName = `Ø§Ù„ÙƒÙˆØªØ´_Ù„Ù„ØµØ±Ø§ÙØ©_${new Date().toISOString().split('T')[0]}.xlsx`;
                XLSX.writeFile(workbook, fileName);
                
                showMessage('operations-message', 'ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Excel Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                
                if (notificationSettings.enabled) {
                    addNotification('ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Excel', 'success');
                }
            } catch (error) {
                handleError(error, 'ØªØµØ¯ÙŠØ± Excel');
            }
        }

        // Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª
        function clearAllOperations() {
            try {
                if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§ØªØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) {
                    operations = [];
                    saveData();
                    loadOperations();
                    updateSummary();
                    showMessage('operations-message', 'ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª!', 'info');
                    
                    if (notificationSettings.enabled) {
                        addNotification('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª', 'info');
                    }
                }
            } catch (error) {
                handleError(error, 'Ø­Ø°Ù Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª');
            }
        }

        // Ø¯ÙˆØ§Ù„ Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ØµØ±Ù
        function saveExchangeRates() {
            try {
                exchangeRates.USD = parseFloat(document.getElementById('usd-rate').value) || 15000;
                exchangeRates.JOD = parseFloat(document.getElementById('jod-rate').value) || 21000;
                exchangeRates.TRY = parseFloat(document.getElementById('try-rate').value) || 500;
                exchangeRates.KWD = parseFloat(document.getElementById('kwd-rate').value) || 48000;
                exchangeRates.EUR = parseFloat(document.getElementById('eur-rate').value) || 16000;

                localStorage.setItem('exchangeRates', JSON.stringify(exchangeRates));
                updateCurrencyEquivalents();
                showMessage('exchange-rates-message', 'ØªÙ… Ø­ÙØ¸ Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ØµØ±Ù Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                
                if (notificationSettings.enabled) {
                    addNotification('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ØµØ±Ù', 'success');
                }
            } catch (error) {
                handleError(error, 'Ø­ÙØ¸ Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ØµØ±Ù');
            }
        }

        function loadExchangeRates() {
            try {
                const saved = localStorage.getItem('exchangeRates');
                if (saved) {
                    exchangeRates = JSON.parse(saved);
                }

                document.getElementById('usd-rate').value = exchangeRates.USD;
                document.getElementById('jod-rate').value = exchangeRates.JOD;
                document.getElementById('try-rate').value = exchangeRates.TRY;
                document.getElementById('kwd-rate').value = exchangeRates.KWD;
                document.getElementById('eur-rate').value = exchangeRates.EUR;

                updateCurrencyEquivalents();
            } catch (error) {
                handleError(error, 'ØªØ­Ù…ÙŠÙ„ Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ØµØ±Ù');
            }
        }

        function updateCurrencyEquivalents() {
            try {
                document.getElementById('usd-equivalent').textContent = exchangeRates.USD.toLocaleString();
                document.getElementById('jod-equivalent').textContent = exchangeRates.JOD.toLocaleString();
                document.getElementById('try-equivalent').textContent = exchangeRates.TRY.toLocaleString();
                document.getElementById('kwd-equivalent').textContent = exchangeRates.KWD.toLocaleString();
                document.getElementById('eur-equivalent').textContent = exchangeRates.EUR.toLocaleString();
                document.getElementById('sar-equivalent').textContent = exchangeRates.SAR.toLocaleString();
                document.getElementById('aed-equivalent').textContent = exchangeRates.AED.toLocaleString();
            } catch (error) {
                handleError(error, 'ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ø§Ø¯Ù„ Ø§Ù„Ø¹Ù…Ù„Ø§Øª');
            }
        }

        function resetExchangeRates() {
            try {
                exchangeRates = {
                    USD: 15000,
                    JOD: 21000,
                    TRY: 500,
                    KWD: 48000,
                    EUR: 16000,
                    SAR: 4000,
                    AED: 4100
                };
                loadExchangeRates();
                showMessage('exchange-rates-message', 'ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ØµØ±Ù Ø¥Ù„Ù‰ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©!', 'info');
            } catch (error) {
                handleError(error, 'Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ØµØ±Ù');
            }
        }

        // Ø¯ÙˆØ§Ù„ Ø§Ù„Ø¢Ù„Ø© Ø§Ù„Ø­Ø§Ø³Ø¨Ø©
        function calculateCurrency() {
            try {
                const amount = parseFloat(document.getElementById('calc-amount').value);
                const fromCurrency = document.getElementById('calc-from-currency').value;
                const toCurrency = document.getElementById('calc-to-currency').value;

                if (!amount || amount <= 0) {
                    throw new Error('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­');
                }

                if (!fromCurrency || !toCurrency) {
                    throw new Error('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…Ù„Ø§Øª');
                }

                let result = 0;
                let calculation = '';

                if (fromCurrency === toCurrency) {
                    result = amount;
                    calculation = `${amount} ${fromCurrency} = ${result} ${toCurrency}`;
                } else if (fromCurrency === 'SYR') {
                    result = amount / exchangeRates[toCurrency];
                    calculation = `${amount.toLocaleString()} Ù„ÙŠØ±Ø© Ø³ÙˆØ±ÙŠØ© Ã· ${exchangeRates[toCurrency].toLocaleString()} = ${result.toFixed(2)} ${toCurrency}`;
                } else if (toCurrency === 'SYR') {
                    result = amount * exchangeRates[fromCurrency];
                    calculation = `${amount} ${fromCurrency} Ã— ${exchangeRates[fromCurrency].toLocaleString()} = ${result.toLocaleString()} Ù„ÙŠØ±Ø© Ø³ÙˆØ±ÙŠØ©`;
                } else {
                    const syrAmount = amount * exchangeRates[fromCurrency];
                    result = syrAmount / exchangeRates[toCurrency];
                    calculation = `${amount} ${fromCurrency} â†’ ${syrAmount.toLocaleString()} Ù„ÙŠØ±Ø© Ø³ÙˆØ±ÙŠØ© â†’ ${result.toFixed(2)} ${toCurrency}`;
                }

                document.getElementById('conversion-details').innerHTML = `
                    <div class="calculation-step">
                        <strong>Ø§Ù„Ø¹Ù…Ù„ÙŠØ©:</strong> ${calculation}
                    </div>
                    <div class="calculation-result">
                        <strong>Ø§Ù„Ù†ØªÙŠØ¬Ø©:</strong> ${result.toLocaleString()} ${toCurrency}
                    </div>
                `;

                document.getElementById('calculation-result').style.display = 'block';
                showMessage('calculator-message', 'ØªÙ… Ø­Ø³Ø§Ø¨ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
            } catch (error) {
                handleError(error, 'Ø­Ø³Ø§Ø¨ Ø§Ù„ØªØ­ÙˆÙŠÙ„');
            }
        }

        function clearCalculator() {
            try {
                document.getElementById('calc-amount').value = '';
                document.getElementById('calc-from-currency').value = 'SYR';
                document.getElementById('calc-to-currency').value = 'USD';
                document.getElementById('calculation-result').style.display = 'none';
                document.getElementById('calculator-message').innerHTML = '';
            } catch (error) {
                handleError(error, 'Ù…Ø³Ø­ Ø§Ù„Ø¢Ù„Ø© Ø§Ù„Ø­Ø§Ø³Ø¨Ø©');
            }
        }

        // Ø¯ÙˆØ§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
        function addNotification(message, type = 'info') {
            try {
                const notification = {
                    id: Date.now(),
                    message: message,
                    type: type,
                    timestamp: new Date().toLocaleString('ar-SA')
                };

                notifications.unshift(notification);
                
                // Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ø¢Ø®Ø± 50 Ø¥Ø´Ø¹Ø§Ø± ÙÙ‚Ø·
                if (notifications.length > 50) {
                    notifications = notifications.slice(0, 50);
                }

                localStorage.setItem('notifications', JSON.stringify(notifications));
                updateNotificationsList();
            } catch (error) {
                handleError(error, 'Ø¥Ø¶Ø§ÙØ© Ø¥Ø´Ø¹Ø§Ø±');
            }
        }

        function updateNotificationsList() {
            try {
                const container = document.getElementById('notifications-container');
                
                if (notifications.length === 0) {
                    container.innerHTML = `
                        <div class="notification-item">
                            <div style="text-align: center; color: #6c757d; padding: 20px;">
                                Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø¨Ø¹Ø¯
                            </div>
                        </div>
                    `;
                    return;
                }

                let html = '';
                notifications.forEach(notification => {
                    const typeEmoji = {
                        'success': 'âœ…',
                        'error': 'âŒ',
                        'warning': 'âš ï¸',
                        'info': 'â„¹ï¸'
                    };

                    html += `
                        <div class="notification-item ${notification.type}">
                            <div class="notification-header">
                                <span class="notification-icon">${typeEmoji[notification.type] || 'â„¹ï¸'}</span>
                                <span class="notification-time">${notification.timestamp}</span>
                            </div>
                            <div class="notification-message">${notification.message}</div>
                        </div>
                    `;
                });

                container.innerHTML = html;
            } catch (error) {
                handleError(error, 'ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª');
            }
        }

        function saveNotificationSettings() {
            try {
                notificationSettings.enabled = document.getElementById('notifications-enabled').checked;
                notificationSettings.autoSendWhatsapp = document.getElementById('auto-send-whatsapp').checked;

                localStorage.setItem('notificationSettings', JSON.stringify(notificationSettings));
                showMessage('notifications-message', 'ØªÙ… Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!', 'success');
            } catch (error) {
                handleError(error, 'Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª');
            }
        }

        function loadNotificationSettings() {
            try {
                const saved = localStorage.getItem('notificationSettings');
                if (saved) {
                    notificationSettings = JSON.parse(saved);
                }

                document.getElementById('notifications-enabled').checked = notificationSettings.enabled;
                document.getElementById('auto-send-whatsapp').checked = notificationSettings.autoSendWhatsapp;
            } catch (error) {
                handleError(error, 'ØªØ­Ù…ÙŠÙ„ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª');
            }
        }

        function clearAllNotifications() {
            try {
                if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§ØªØŸ')) {
                    notifications = [];
                    localStorage.removeItem('notifications');
                    updateNotificationsList();
                    showMessage('notifications-message', 'ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª!', 'info');
                }
            } catch (error) {
                handleError(error, 'Ø­Ø°Ù Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª');
            }
        }

        // Ø¯ÙˆØ§Ù„ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨
        function saveWhatsAppSettings() {
            try {
                whatsappSettings.enabled = document.getElementById('whatsapp-enabled').checked;
                whatsappSettings.phoneNumber = document.getElementById('whatsapp-phone').value.trim();
                whatsappSettings.ownerName = document.getElementById('whatsapp-name').value.trim();

                if (whatsappSettings.enabled && !whatsappSettings.phoneNumber) {
                    throw new Error('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨');
                }

                if (whatsappSettings.phoneNumber && !/^\d{10,15}$/.test(whatsappSettings.phoneNumber)) {
                    throw new Error('Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ØºÙŠØ± ØµØ­ÙŠØ­. ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø· (10-15 Ø±Ù‚Ù…)');
                }

                localStorage.setItem('whatsappSettings', JSON.stringify(whatsappSettings));
                showMessage('whatsapp-message', 'ØªÙ… Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                
                if (notificationSettings.enabled) {
                    addNotification('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨', 'success');
                }
            } catch (error) {
                handleError(error, 'Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨');
            }
        }

        function loadWhatsAppSettings() {
            try {
                const saved = localStorage.getItem('whatsappSettings');
                if (saved) {
                    whatsappSettings = JSON.parse(saved);
                }

                document.getElementById('whatsapp-enabled').checked = whatsappSettings.enabled;
                document.getElementById('whatsapp-phone').value = whatsappSettings.phoneNumber;
                document.getElementById('whatsapp-name').value = whatsappSettings.ownerName;
            } catch (error) {
                handleError(error, 'ØªØ­Ù…ÙŠÙ„ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨');
            }
        }

        function testWhatsAppNotification() {
            try {
                const testMessage = `ğŸ¦ *${whatsappSettings.ownerName}*

ğŸ“± *Ø±Ø³Ø§Ù„Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ©*

Ù‡Ø°Ù‡ Ø±Ø³Ø§Ù„Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ù…Ù„ Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª.

ğŸ“ Ø¯Ù…Ø´Ù‚ - Ø³Ø§Ø­Ø© Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©
ğŸ“ +963-0992223739`;

                sendWhatsAppNotification(testMessage);
                showMessage('whatsapp-message', 'ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ©!', 'success');
            } catch (error) {
                handleError(error, 'Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨');
            }
        }

        function formatOperationMessage(operation) {
            const currencyNames = {
                'USD': 'Ø¯ÙˆÙ„Ø§Ø± Ø£Ù…Ø±ÙŠÙƒÙŠ ğŸ’µ',
                'JOD': 'Ø¯ÙŠÙ†Ø§Ø± Ø£Ø±Ø¯Ù†ÙŠ ğŸ‡¯ğŸ‡´',
                'TRY': 'Ù„ÙŠØ±Ø© ØªØ±ÙƒÙŠØ© ğŸ‡¹ğŸ‡·',
                'KWD': 'Ø¯ÙŠÙ†Ø§Ø± ÙƒÙˆÙŠØªÙŠ ğŸ‡°ğŸ‡¼',
                'EUR': 'ÙŠÙˆØ±Ùˆ ğŸ‡ªğŸ‡º',
                'SAR': 'Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ ğŸ‡¸ğŸ‡¦',
                'AED': 'Ø¯Ø±Ù‡Ù… Ø¥Ù…Ø§Ø±Ø§ØªÙŠ ğŸ‡¦ğŸ‡ª',
                'SYR': 'Ù„ÙŠØ±Ø© Ø³ÙˆØ±ÙŠØ© ğŸ‡¸ğŸ‡¾'
            };

            return `ğŸ¦ *${whatsappSettings.ownerName}*

ğŸ“Š *ØªÙ†Ø¨ÙŠÙ‡ Ø¹Ù…Ù„ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©*

ğŸ”¸ *Ø§Ù„Ù†ÙˆØ¹:* ${operation.type}
ğŸ’° *Ø§Ù„Ø¹Ù…Ù„Ø©:* ${currencyNames[operation.currency]}
ğŸ“ˆ *Ø§Ù„ÙƒÙ…ÙŠØ©:* ${operation.amount.toLocaleString()}
${operation.rate && operation.rate !== 1 ? `ğŸ’± *Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù:* ${operation.rate.toLocaleString()}` : ''}
${operation.syrAmount && operation.currency !== 'SYR' ? `ğŸ’µ *Ø§Ù„Ù…Ø¨Ù„Øº Ø¨Ø§Ù„Ù„ÙŠØ±Ø©:* ${operation.syrAmount.toLocaleString()}` : ''}
ğŸ“ *Ø§Ù„ÙˆØµÙ:* ${operation.description}
ğŸ“… *Ø§Ù„ØªØ§Ø±ÙŠØ®:* ${operation.date}
â° *Ø§Ù„ÙˆÙ‚Øª:* ${operation.time}

ğŸ“ Ø¯Ù…Ø´Ù‚ - Ø³Ø§Ø­Ø© Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©
ğŸ“ +963-0992223739`;
        }

        function sendWhatsAppNotification(message) {
            try {
                if (!whatsappSettings.enabled) {
                    return;
                }

                const encodedMessage = encodeURIComponent(message);
                const whatsappUrl = `https://wa.me/${whatsappSettings.phoneNumber}?text=${encodedMessage}`;
                
                window.open(whatsappUrl, '_blank');
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨:', error);
                throw error;
            }
        }

        // Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø©
        function validateAmount(amount) {
            if (isNaN(amount) || amount <= 0) {
                throw new Error('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­ Ø£ÙƒØ¨Ø± Ù…Ù† Ø§Ù„ØµÙØ±');
            }
            return { value: amount };
        }

        function validateDescription(description) {
            if (!description || description.length < 2) {
                throw new Error('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙˆØµÙ ØµØ­ÙŠØ­ (Ø­Ø¯ Ø£Ø¯Ù†Ù‰ Ø­Ø±ÙØ§Ù†)');
            }
            return { value: description };
        }

        function handleError(error, context) {
            console.error(`Ø®Ø·Ø£ ÙÙŠ ${context}:`, error);
            const message = error.message || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹';
            showMessage(`${context}-message`, `Ø®Ø·Ø£: ${message}`, 'danger');
            
            if (notificationSettings.enabled) {
                addNotification(`Ø®Ø·Ø£ ÙÙŠ ${context}: ${message}`, 'error');
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ù‚Ø³Ù… Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù
        function updateExchangeRateSection() {
            try {
                const operationType = document.getElementById('operation-type').value;
                const exchangeRateSection = document.getElementById('exchange-rate-section');
                
                if (operationType === 'Ø´Ø±Ø§Ø¡' || operationType === 'Ø¨ÙŠØ¹') {
                    exchangeRateSection.style.display = 'block';
                } else {
                    exchangeRateSection.style.display = 'none';
                }
            } catch (error) {
                handleError(error, 'ØªØ­Ø¯ÙŠØ« Ù‚Ø³Ù… Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù');
            }
        }

        // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function saveData() {
            try {
                localStorage.setItem('capitalData', JSON.stringify(capitalData));
                localStorage.setItem('operations', JSON.stringify(operations));
            } catch (error) {
                handleError(error, 'Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
            }
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function loadData() {
            try {
                const savedCapital = localStorage.getItem('capitalData');
                if (savedCapital) {
                    capitalData = JSON.parse(savedCapital);
                    document.getElementById('capital-syr').value = capitalData.SYR || 0;
                    document.getElementById('capital-usd').value = capitalData.USD || 0;
                    document.getElementById('capital-jod').value = capitalData.JOD || 0;
                    document.getElementById('capital-try').value = capitalData.TRY || 0;
                    document.getElementById('capital-kwd').value = capitalData.KWD || 0;
                    document.getElementById('capital-eur').value = capitalData.EUR || 0;
                }

                const savedOperations = localStorage.getItem('operations');
                if (savedOperations) {
                    operations = JSON.parse(savedOperations);
                }

                const savedNotifications = localStorage.getItem('notifications');
                if (savedNotifications) {
                    notifications = JSON.parse(savedNotifications);
                }
                
                loadWhatsAppSettings();
                loadExchangeRates();
                loadNotificationSettings();
                updateNotificationsList();
            } catch (error) {
                handleError(error, 'ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
            }
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
        function showMessage(elementId, message, type = 'success') {
            try {
                const element = document.getElementById(elementId);
                if (!element) return;

                element.innerHTML = `
                    <div class="alert alert-${type}">
                        ${message}
                    </div>
                `;

                setTimeout(() => {
                    element.innerHTML = '';
                }, 5000);
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ù„Ø©:', error);
            }
        }

        // Ø¹Ø±Ø¶ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
        function showTab(tabName) {
            try {
                const tabContents = document.querySelectorAll('.tab-content');
                tabContents.forEach(content => content.classList.remove('active'));
                
                const tabs = document.querySelectorAll('.tab');
                tabs.forEach(tab => tab.classList.remove('active'));

                const targetTab = document.getElementById(tabName);
                if (!targetTab) {
                    throw new Error(`Ø§Ù„ØªØ¨ÙˆÙŠØ¨ ${tabName} ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯`);
                }

                targetTab.classList.add('active');
                event.target.classList.add('active');

                if (tabName === 'operations') {
                    loadOperations();
                } else if (tabName === 'summary') {
                    updateSummary();
                } else if (tabName === 'exchange-rates') {
                    updateCurrencyEquivalents();
                } else if (tabName === 'notifications') {
                    updateNotificationsList();
                }
            } catch (error) {
                handleError(error, 'Ø¹Ø±Ø¶ Ø§Ù„ØªØ¨ÙˆÙŠØ¨');
            }
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', function() {
            try {
                loadData();
                updateSummary();
                loadOperations();
                
                const today = new Date().toISOString().split('T')[0];
                document.getElementById('operation-date').value = today;
            } catch (error) {
                handleError(error, 'ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©');
            }
        });

        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ØºÙŠØ± Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©
        window.addEventListener('error', function(event) {
            console.error('Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹:', event.error);
            if (notificationSettings.enabled) {
                addNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…', 'error');
            }
        });

        // ØªØ³Ø¬ÙŠÙ„ Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js')
                    .then(function(registration) {
                        console.log('Service Worker registered successfully:', registration.scope);
                    })
                    .catch(function(error) {
                        console.log('Service Worker registration failed:', error);
                    });
            });
        }
    </script>
</body>
</html>